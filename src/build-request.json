{
  "kind": "build_request",
  "title": "Build Phase 1: Core Shop with Browse, Details, and Cart",
  "projectName": "Minecraft Shop",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Create backend data model for shop items with fields: id (Text), name (Text), description (Text), price (Nat), imageUrl (Text), stock (Nat), category (Text), isActive (Bool). Use mo:base types only.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Shop items data structure — Same fields as current (name, description, price, image, stock, category, etc.)"
        ]
      },
      "acceptanceCriteria": [
        "ShopItem type defined with all specified fields using mo:base types",
        "Items stored in stable variable using HashMap or Array",
        "No mo:core imports present in backend code"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement backend CRUD operations for shop items: createItem, updateItem, deleteItem, getItem, listItems. Include admin authorization checks using existing isAdmin pattern.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Admin CRUD for shop items",
          "Admin functionality — Same CRUD operations you have now for managing shop items"
        ]
      },
      "acceptanceCriteria": [
        "All CRUD endpoints implemented and callable from frontend",
        "Admin-only operations protected by authorization",
        "listItems returns all active shop items",
        "Operations handle edge cases (item not found, duplicate IDs)"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Create shopping cart data model supporting item quantities, stored per user principal. Implement addToCart, removeFromCart, updateQuantity, getCart, and clearCart operations.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Basic cart (add/remove with quantities, same persistence and user behavior as current)",
          "Cart behavior — Same as current (quantities, persistence, user-specific or anonymous)"
        ]
      },
      "acceptanceCriteria": [
        "Cart persists across page refreshes",
        "Each user has isolated cart state",
        "Quantities can be increased/decreased",
        "Cart operations validate stock availability",
        "Cart can be cleared entirely"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Build shop browse page displaying all active items in a grid layout matching the current website design. Show item image, name, price, and stock status. Include category filtering.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Browse items with the same data structure as current",
          "Same UI layout and styling as current website"
        ]
      },
      "acceptanceCriteria": [
        "Grid layout displays all shop items with images",
        "Items show price formatted as currency",
        "Out of stock items visually indicated",
        "Category filter works to narrow results",
        "Layout matches existing ShopPage.tsx styling"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Create item detail view showing full description, larger image, price, stock availability, and quantity selector with add to cart button. Match current website styling.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "View item details",
          "Same UI layout and styling as current website"
        ]
      },
      "acceptanceCriteria": [
        "Detail view accessible by clicking item card",
        "Full item information displayed clearly",
        "Quantity selector allows choosing amount before adding to cart",
        "Add to cart button disabled when out of stock",
        "Success feedback shown when item added to cart"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Implement shopping cart UI component showing added items with quantities, individual prices, total price calculation, and remove buttons. Include empty cart state.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Basic cart (add/remove with quantities, same persistence and user behavior as current)"
        ]
      },
      "acceptanceCriteria": [
        "Cart displays all added items with current quantities",
        "Quantity can be adjusted inline",
        "Remove button removes items from cart",
        "Total price updates automatically",
        "Empty cart shows helpful message",
        "Cart count badge updates in header"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Build admin panel for managing shop items with create, edit, and delete forms. Include image URL input, price validation, stock management, and category selection. Protect with admin authorization.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Admin CRUD for shop items",
          "Admin functionality — Same CRUD operations you have now for managing shop items"
        ]
      },
      "acceptanceCriteria": [
        "Admin-only UI accessible from navigation when authorized",
        "Create form validates all required fields",
        "Edit form pre-populates with existing item data",
        "Delete action includes confirmation prompt",
        "Forms provide clear success/error feedback",
        "Non-admin users cannot access admin routes"
      ]
    }
  ],
  "constraints": [
    "Use mo:base only - no mo:core imports in backend code",
    "Preserve existing Header.tsx, Footer.tsx, and Layout.tsx structure",
    "Do not modify useInternetIdentity.ts or useActor.ts hooks",
    "Maintain single-actor backend architecture in main.mo",
    "Keep existing authentication and authorization patterns"
  ],
  "nonGoals": [
    "UPI payment integration (Phase 3)",
    "Order history and tracking (Phase 4)",
    "Order approval system (Phase 4)",
    "User profile management (Phase 2)",
    "User registration/login beyond existing Internet Identity (Phase 2)"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}